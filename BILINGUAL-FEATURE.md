# 🌐 双向翻译功能说明

## ✨ 新功能

插件现在支持**双向翻译**：

### 1️⃣ 中文页面 → 英文学习
- 自动检测中文页面
- 将部分中文词汇替换为英文
- 帮助在中文环境中学习英文

### 2️⃣ 英文页面 → 中文学习
- 自动检测英文页面
- 将部分英文词汇替换为中文
- 帮助在英文环境中学习中文

## 🎯 工作原理

### 自动语言检测
插件会自动分析页面内容：
- 如果中文字符占比 > 30% → 识别为中文页面
- 否则 → 识别为英文页面

### 智能替换
根据页面语言自动选择：
- **中文页面**：使用中→英词汇表
- **英文页面**：使用英→中词汇表

## 📚 词汇库

### 中文→英文词汇库
- **简单**：50+ 日常基础词汇
- **中等**：100+ 常用词汇
- **困难**：175+ 专业术语

### 英文→中文词汇库
- **简单**：50+ 基础英文单词
- **中等**：50+ 常用英文词汇
- **困难**：50+ 专业英文术语

## 🎨 使用示例

### 中文页面示例
```
原文：今天天气很好，我要去学习编程技术。
结果：今天 weather 很好，我要去 study 编程 technology。
```

### 英文页面示例
```
原文：Today the weather is good, I want to study programming technology.
结果：Today the 天气 is good, I want to 学习 programming 技术.
```

## ⚙️ 配置说明

### 替换比例
- 0-100% 可调
- 控制替换词汇的数量
- 适用于中英文双向

### 难度级别
- **简单**：日常基础词汇
- **中等**：常用词汇 + 专业词汇
- **困难**：包含专业术语

### AI模式
- 支持中文→英文智能分析
- 支持英文→中文智能分析
- 自动根据页面语言调整提示词

## 🔊 发音功能

### 中文页面
- 鼠标悬停在英文单词上
- 自动播放**英文发音**（美式）

### 英文页面
- 鼠标悬停在中文单词上
- 自动播放**中文发音**

## 💡 交互功能

### 点击切换
- 点击替换的词汇
- 在原文和译文之间切换
- 适用于中英文双向

### 悬停提示
- 鼠标悬停显示原文
- 黄色高亮效果
- 工具提示显示完整信息

## 🎓 学习场景

### 场景1：英语学习者
- 浏览中文网站
- 自动插入英文单词
- 在熟悉的中文环境中学习英文

### 场景2：中文学习者
- 浏览英文网站
- 自动插入中文单词
- 在英文环境中学习中文

### 场景3：双语提升
- 根据需要切换页面语言
- 灵活调整替换比例
- 渐进式提高语言能力

## 🚀 技术特性

### 智能检测
- 自动识别页面主要语言
- 无需手动切换模式
- 准确率高

### 单词边界匹配
- 英文使用单词边界匹配
- 避免部分匹配错误
- 不区分大小写

### 占位符机制
- 避免重复替换
- 保证替换准确性
- 支持长短词汇混合

## 📊 词汇统计

### 中文→英文
- 简单：50 词
- 中等：100 词
- 困难：175 词
- **总计：175 词**

### 英文→中文
- 简单：50 词
- 中等：50 词
- 困难：50 词
- **总计：150 词**

## 🎉 优势

### 1. 自动化
- 无需手动选择语言
- 自动检测页面类型
- 智能选择词汇库

### 2. 灵活性
- 支持双向翻译
- 可调节替换比例
- 多种难度级别

### 3. 沉浸式
- 在真实内容中学习
- 保持阅读流畅性
- 自然的学习体验

### 4. 交互性
- 点击切换显示
- 悬停自动发音
- 即时反馈

## 🔧 技术实现

### 语言检测
```javascript
function detectPageLanguage(text) {
  // 统计中英文字符比例
  // 中文占比 > 30% → 中文页面
  // 否则 → 英文页面
}
```

### 词汇选择
```javascript
// 根据页面语言选择词汇库
const vocab = pageLanguage === 'chinese'
  ? vocabularyCN2EN
  : vocabularyEN2CN;
```

### 智能替换
```javascript
// 中文：直接匹配
// 英文：单词边界 + 不区分大小写
const regex = pageLanguage === 'chinese'
  ? new RegExp(escapeRegExp(source), 'g')
  : new RegExp('\\b' + escapeRegExp(source) + '\\b', 'gi');
```

## 📝 使用建议

### 英语学习者
1. 从简单难度开始
2. 替换比例设置 20-30%
3. 逐步提高难度和比例
4. 利用发音功能练习口语

### 中文学习者
1. 选择熟悉的英文网站
2. 从低替换比例开始
3. 关注常用词汇
4. 结合上下文理解

### 双语提升
1. 交替使用中英文网站
2. 根据学习目标调整设置
3. 利用AI模式获得更好效果
4. 定期复习替换的词汇

## 🎊 总结

双向翻译功能让插件更加强大和灵活：
- ✅ 支持中英文双向学习
- ✅ 自动检测页面语言
- ✅ 智能选择词汇库
- ✅ 保持原有所有功能
- ✅ 无需额外配置

**现在就开始你的双语学习之旅吧！** 🌟
